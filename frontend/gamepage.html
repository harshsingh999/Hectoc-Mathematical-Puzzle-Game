<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>HectoClash Lobby</title>
<style>
body { font-family: Arial; text-align:center; margin-top:50px; }
input, button { padding:10px; margin:5px; }
#gameIdDisplay { margin-top:20px; font-weight:bold; }
</style>
</head>
<body>

<h2>HectoClash Multiplayer Lobby</h2>

<input type="text" id="playerName" placeholder="Enter your name" />
<br>
<button id="createBtn">Create Room</button>
<br>
<input type="text" id="joinGameId" placeholder="Enter Game ID to join" />
<button id="joinBtn">Join Room</button>

<div id="gameIdDisplay"></div>

<script>
const API = 'http://localhost:5000/api/game';

document.getElementById('createBtn').onclick = async () => {
    const playerName = document.getElementById('playerName').value.trim();
    if(!playerName) return alert('Enter your name');

    // Create room
    const res = await fetch(`${API}/create`, { method:'POST' });
    const data = await res.json();
    const gameId = data.gameId;

    // Display Game ID to copy/share
    document.getElementById('gameIdDisplay').textContent = `ðŸŽ® Room Created! Your Game ID: ${gameId}
Share this ID with another player to join.`;
};

document.getElementById('joinBtn').onclick = async () => {
    const playerName = document.getElementById('playerName').value.trim();
    const gameId = document.getElementById('joinGameId').value.trim();
    if(!playerName || !gameId) return alert('Enter both fields');

    // Join the room
    const res = await fetch(`${API}/join`, {
        method:'POST', headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ gameId, playerName })
    });
    const data = await res.json();
    if(data.error) return alert(data.error);

    // Redirect to game page
    window.location.href = `gamepage2.html?gameId=${gameId}&playerName=${playerName}`;
};
</script>

</body>
</html>
